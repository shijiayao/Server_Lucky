server {
    listen 80 default_server;
    server_name _;

    # nginx 的 default_server 指令可以定义默认的 server 去处理一些没有匹配到 server_name 的请求，如果没有显式定义，则会选取第一个定义的 server 作为 default_server。 用来处理没有域名，直接使用 IP 访问的服务地址定向
    # _ 没有什么特别之处，它只是无数与任何真实姓名不相交的无效域名之一。可以同样使用其他无效名称，如 “--” 和 “!@#”

    location / {
        set $is_matched_http 0;

        if ($host = local.com) {
            proxy_pass http://127.0.0.1:19500;
            set $is_matched_http 1;
        }

        if ($host = local.library.com) {
            proxy_pass http://127.0.0.1:19501;
            set $is_matched_http 1;
        }

        if ($host = local.mini.eastday.com) {
            proxy_pass http://127.0.0.1:19502;
            set $is_matched_http 1;
        }

        if ($host = local.kankan.eastday.com) {
            proxy_pass http://127.0.0.1:19503;
            set $is_matched_http 1;
        }

        if ($host = local.xingzuo.eastday.com) {
            proxy_pass http://127.0.0.1:19504;
            set $is_matched_http 1;
        }

        if ($host = local.1.mini.eastday.com) {
            proxy_pass http://127.0.0.1:19505;
            set $is_matched_http 1;
        }

        if ($host = local.h5.lieqinews.com) {
            proxy_pass http://127.0.0.1:19506;
            set $is_matched_http 1;
        }

        if ($host = local.lieqi.kzynews.com) {
            proxy_pass http://127.0.0.1:19507;
            set $is_matched_http 1;
        }

        if ($host = local.yangsheng.eastday.com) {
            proxy_pass http://127.0.0.1:19508;
            set $is_matched_http 1;
        }

        if ($host = local.www.9973.com) {
            proxy_pass http://127.0.0.1:19509;
            set $is_matched_http 1;
        }

        if ($host = local.video.eastday.com) {
            proxy_pass http://127.0.0.1:19510;
            set $is_matched_http 1;
        }

        if ($host = local.mil.eastday.com) {
            proxy_pass http://127.0.0.1:19511;
            set $is_matched_http 1;
        }

        if ($host = local.auto.eastday.com) {
            proxy_pass http://127.0.0.1:19512;
            set $is_matched_http 1;
        }

        if ($host = local.www.songhengnet.com) {
            proxy_pass http://127.0.0.1:19513;
            set $is_matched_http 1;
        }

        if ($host = local.mini.lanshan.com) {
            proxy_pass http://127.0.0.1:19514;
            set $is_matched_http 1;
        }

        if ($host = local.recovery.zsincer.com) {
            proxy_pass http://127.0.0.1:19515;
            set $is_matched_http 1;
        }

        if ($host = local.sports.eastday.com) {
            proxy_pass http://127.0.0.1:19516;
            set $is_matched_http 1;
        }

        if ($is_matched_http = 0) {
            proxy_pass http://127.0.0.1:19500;
        }


    }
}

server {
    listen 443 default_server ssl;
    server_name __;

    ssl_certificate D:/Web/node_server/https_server/https_server.pem;
    ssl_certificate_key D:/Web/node_server/https_server/https_server.key;

    location / {
        set $is_matched_https 0;

        if ($host = local.com) {
            proxy_pass https://127.0.0.1:17500;
            set $is_matched_https 1;
        }

        if ($host = local.library.com) {
            proxy_pass https://127.0.0.1:17501;
            set $is_matched_https 1;
        }

        if ($host = local.mini.eastday.com) {
            proxy_pass https://127.0.0.1:17502;
            set $is_matched_https 1;
        }

        if ($host = local.kankan.eastday.com) {
            proxy_pass https://127.0.0.1:17503;
            set $is_matched_https 1;
        }

        if ($host = local.xingzuo.eastday.com) {
            proxy_pass https://127.0.0.1:17504;
            set $is_matched_https 1;
        }

        if ($host = local.1.mini.eastday.com) {
            proxy_pass https://127.0.0.1:17505;
            set $is_matched_https 1;
        }

        if ($host = local.h5.lieqinews.com) {
            proxy_pass https://127.0.0.1:17506;
            set $is_matched_https 1;
        }

        if ($host = local.lieqi.kzynews.com) {
            proxy_pass https://127.0.0.1:17507;
            set $is_matched_https 1;
        }

        if ($host = local.yangsheng.eastday.com) {
            proxy_pass https://127.0.0.1:17508;
            set $is_matched_https 1;
        }

        if ($host = local.www.9973.com) {
            proxy_pass https://127.0.0.1:17509;
            set $is_matched_https 1;
        }

        if ($host = local.video.eastday.com) {
            proxy_pass https://127.0.0.1:17510;
            set $is_matched_https 1;
        }

        if ($host = local.mil.eastday.com) {
            proxy_pass https://127.0.0.1:17511;
            set $is_matched_https 1;
        }

        if ($host = local.auto.eastday.com) {
            proxy_pass https://127.0.0.1:17512;
            set $is_matched_https 1;
        }

        if ($host = local.www.songhengnet.com) {
            proxy_pass https://127.0.0.1:17513;
            set $is_matched_https 1;
        }

        if ($host = local.mini.lanshan.com) {
            proxy_pass https://127.0.0.1:17514;
            set $is_matched_https 1;
        }

        if ($host = local.recovery.zsincer.com) {
            proxy_pass https://127.0.0.1:17515;
            set $is_matched_https 1;
        }

        if ($host = local.sports.eastday.com) {
            proxy_pass https://127.0.0.1:17516;
            set $is_matched_https 1;
        }

        if ($is_matched_https = 0) {
            proxy_pass https://127.0.0.1:17500;
        }


    }
}
